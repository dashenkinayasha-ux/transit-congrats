<!DOCTYPE html>
<html>
<head>
    <title>Персональная открытка от "Транзита"</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background-color: #f0f0f0; }
        .container { max-width: 600px; margin: 50px auto; padding: 20px; background: white; border-radius: 10px; }
        input, button { padding: 10px; margin: 10px; font-size: 16px; }
        #poster-container { margin-top: 20px; display: none; } /* Сначала скрываем открытку */
        #name-poster {
            width: 100%;
            max-width: 500px;
            border: 2px solid #ccc;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>С Днём автомобилиста!</h1>
        <p>Введи своё имя и получи персональную открытку от команды "Транзит".</p>
        
        <input type="text" id="userName" placeholder="Твоё имя">
        <button onclick="generatePoster()">Создать открытку!</button>
        
        <div id="poster-container">
            <p>Вот твоя открытка! Нажми и удерживай, чтобы сохранить на телефон.</p>
            <!-- Холст для отрисовки открытки -->
            <canvas id="name-poster" width="1000" height="1400"></canvas>
            <br>
            <button onclick="sharePoster()">Поделиться в Telegram</button>
        </div>
    </div>

    <script>
        function generatePoster() {
            const userName = document.getElementById('userName').value.trim();
            if (!userName) {
                alert('Введи своё имя!');
                return;
            }

            const canvas = document.getElementById('name-poster');
            const ctx = canvas.getContext('2d');

            // 1. Очищаем холст
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // 2. Загружаем и рисуем фоновое изображение (ваш шаблон)
            const background = new Image();
            background.src = 'template-poster.jpg'; // Укажите путь к вашему шаблону
            background.onload = function() {
                // Рисуем фон
                ctx.drawImage(background, 0, 0, canvas.width, canvas.height);

                // 3. Настраиваем стиль текста для имени
                ctx.font = 'bold 80px Arial';
                ctx.fillStyle = '#2c3e50'; // Цвет текста
                ctx.textAlign = 'center';
                
                // 4. Вписываем имя сотрудника (координаты подбираются экспериментально)
                ctx.fillText(userName.toUpperCase(), canvas.width / 2, 900); 

                // 5. Показываем контейнер с открыткой
                document.getElementById('poster-container').style.display = 'block';
            };
        }

        function sharePoster() {
            const canvas = document.getElementById('name-poster');
            // Конвертируем Canvas в изображение
            canvas.toBlob(function(blob) {
                // Создаем временную ссылку для скачивания
                const link = document.createElement('a');
                link.download = 'my_transit_poster.png';
                link.href = URL.createObjectURL(blob);
                link.click();
            });

            // Ссылка для шаринга в Telegram
            const userName = document.getElementById('userName').value.trim();
            const shareText = `С Днём автомобилиста! Посмотрите мою персональную открытку от компании "Транзит"!`;
            const telegramUrl = `https://t.me/share/url?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent(shareText)}`;
            window.open(telegramUrl, '_blank');
        }
    </script>
</body>
</html>